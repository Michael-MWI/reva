enum LegalStatus {
  EI
  EURL
  SARL
  SAS
  SASU
  SA
  EIRL
  ASSOCIATION_LOI_1901
  ETABLISSEMENT_PUBLIC
  FONDATION
  AUTRE
  NC
}

enum SubscriptionRequestStatus {
  PENDING
  REJECTED
}

type SubscriptionRequestV2 {
  id: ID!
  companySiret: String!
  companyLegalStatus: LegalStatus!
  companyName: String!
  managerFirstname: String!
  managerLastname: String!
  accountFirstname: String!
  accountLastname: String!
  accountEmail: String!
  accountPhoneNumber: String!
  companyWebsite: String!
  delegataire: Boolean!
  status: SubscriptionRequestStatus!
  rejectionReason: String
  internalComment: String
  attestationURSSAFFile: File!
  justificatifIdentiteDirigeantFile: File!
  lettreDeDelegationFile: File
  justificatifIdentiteDelegataireFile: File
  createdAt: Timestamp!
  etablissement: Etablissement
}
type SubscriptionRequestV2sPaginated {
  rows: [SubscriptionRequestV2!]!
  info: PaginationInfo!
}

type SubscriptionCountByStatus {
  PENDING_SUBSCRIPTION: Int!
  REJECTED_SUBSCRIPTION: Int!
  PENDING_LEGAL_VERIFICATION: Int!
  NEED_LEGAL_VERIFICATION: Int!
  APPROVED: Int!
}

type Query {
  subscription_getSubscriptionRequestV2s(
    offset: Int
    limit: Int
    status: SubscriptionRequestStatus
    searchFilter: String
  ): SubscriptionRequestV2sPaginated!
  subscription_getSubscriptionRequestV2(
    subscriptionRequestId: ID!
  ): SubscriptionRequestV2
  subscription_getSubscriptionCountByStatus(
    searchFilter: String
  ): SubscriptionCountByStatus!
}

input CreateSubscriptionRequestV2Input {
  companySiret: String!
  companyLegalStatus: LegalStatus!
  companyName: String!
  managerFirstname: String!
  managerLastname: String!
  accountFirstname: String!
  accountLastname: String!
  accountEmail: String!
  accountPhoneNumber: String!
  companyWebsite: String
  delegataire: Boolean!
  attestationURSSAF: Upload!
  justificatifIdentiteDirigeant: Upload!
  lettreDeDelegation: Upload
  justificatifIdentiteDelegataire: Upload
}

type Mutation {
  subscription_createSubscriptionRequestV2(
    createSubscriptionRequestV2Input: CreateSubscriptionRequestV2Input!
  ): String!
  subscription_validateSubscriptionRequestV2(subscriptionRequestId: ID!): String
  subscription_rejectSubscriptionRequestV2(
    subscriptionRequestId: ID!
    reason: String!
    internalComment: String
  ): String
}
