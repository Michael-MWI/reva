type DossierDeValidation {
  id: ID!
  candidacy: Candidacy!
  dossierDeValidationFile: File!
  dossierDeValidationOtherFiles: [File!]!
  dossierDeValidationSentAt: Timestamp!
  decision: DossierDeValidationDecision!
  decisionComment: String
  decisionSentAt: Timestamp
  isActive: Boolean!
  createdAt: Timestamp!
  updatedAt: Timestamp
  history: [DossierDeValidation!]!
}

enum DossierDeValidationDecision {
  PENDING
  INCOMPLETE
  COMPLETE
}

enum DossierDeValidationCategoryFilter {
  ALL
  PENDING
  INCOMPLETE
  COMPLETE
}

type Candidacy {
  activeDossierDeValidation: DossierDeValidation
  historyDossierDeValidation: [DossierDeValidation!]!
}

type DossierDeValidationPage {
  rows: [DossierDeValidation!]!
  info: PaginationInfo!
}

type DossierDeValidationCountByCategory {
  ALL: Int!
  PENDING: Int!
  INCOMPLETE: Int!
  COMPLETE: Int!
}

type Query {
  dossierDeValidation_getDossierDeValidationById(
    dossierDeValidationId: ID!
  ): DossierDeValidation
  dossierDeValidation_getDossiersDeValidation(
    offset: Int
    limit: Int
    categoryFilter: DossierDeValidationCategoryFilter
    searchFilter: String
    certificationAuthorityId: ID
    certificationAuthorityLocalAccountId: ID
  ): DossierDeValidationPage!
  dossierDeValidation_dossierDeValidationCountByCategory(
    searchFilter: String
    certificationAuthorityId: ID
    certificationAuthorityLocalAccountId: ID
  ): DossierDeValidationCountByCategory!
}

type Mutation {
  dossierDeValidation_markAsIncomplete(
    dossierDeValidationId: ID!
    decisionComment: String!
  ): DossierDeValidation!
  dossierDeValidation_markAsComplete(
    dossierDeValidationId: ID!
    decisionComment: String
  ): DossierDeValidation!
}
